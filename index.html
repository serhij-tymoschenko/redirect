<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Launching DApp...</title>
</head>
<body>
<p>Opening in Base Browser... <br>
    <a id="manual" href="#">Click here if it doesn't open.</a>
</p>

<script>
    (function() {
        // 1. The URL you want to open inside Base
        const targetUrl = "https://mash-it.io/mashers?listing=429";

        // 2. Wrap it in the 'go' path and encode it
        const intentUri = "intent://go?url=" + encodeURIComponent(targetUrl) +
            "#Intent;scheme=cbwallet;package=org.toshi;S.browser_fallback_url=" +
            encodeURIComponent(targetUrl) + ";end";

        // Update manual link for safety
        document.getElementById('manual').href = intentUri;

        // 3. The "Mash": Triple execution to bypass browser hang
        window.location.replace(intentUri); // Attempt 1

        setTimeout(() => {
            window.location.href = intentUri; // Attempt 2
        }, 50);

        setTimeout(() => {
            // Final attempt if user is still on this page
            window.location = intentUri;
        }, 250);
    })();
</script>
</body>
</html>